Терминальный клиент psql
#####################


Программа **psql** — это терминальный клиент для работы с PostgreSQL. 
Она позволяет интерактивно вводить запросы, передавать их в PostgreSQL и видеть результаты. 
Также запросы могут быть получены из файла или из аргументов командной строки. 
Кроме того, psql предоставляет ряд метакоманд и различные возможности, подобные тем, 
что имеются у командных оболочек, для облегчения написания скриптов и автоматизации широкого спектра задач.

Данный инструмент предназначен в первую очередь для администраторов.

Подключение к базе данных
*************************

**Синтаксис команды подключения:**

*Полная форма:*

::

	psql -d <db> -U <username> -h <server> -p <port>

::

	psql -U postgres

.. figure:: img/03_connect_postgres.png
       :scale: 100 %
       :align: center
       :alt: asda

Так как база данных не была указана, то подключение произошло к базе *postgres* через Unix-сокет.
Это можно увидеть, введя команду **\conninfo**.

**/conninfo** - вывод информации о текущем подключении:

.. figure:: img/03_conninfo
       :scale: 100 %
       :align: center
       :alt: asda

Приглашение вида:

::

	postgres=# 
	
означает, что работа осуществляется в привилегированном режиме.

::

	=>
	
непривилегированный режим


**CTRL+D** - выход из сеанса psql.

*Сокращенная форма*

::

	psql

В данном случае psql попробует подключиться, используя значения по умолчанию:

- база — совпадает с именем пользователя(admin);
- пользователь — совпадает с именем пользователя ОС(admin);
- узел — соединение через Unix-socket;
- порт — 5432.

.. figure:: img/03_connect_admin.png
       :scale: 100 %
       :align: center
       :alt: asda

В этом примере пользователь **admin** отстутствует среди зарегистрированных в кластере.

::

	psql -U postgres

**\c[onnect]** - метакоманда для подключения к базе данных из сеанса psql

Синтаксис:

::

	\c <db> <username> <server> <port>

::

	\c dvdrental
	
.. figure:: img/03_conn_dvd_rental
       :scale: 100 %
       :align: center
       :alt: asda

Справочная информация
**********************

Основной источник справочной информации - это официальная документация postgres

https://postgrespro.ru/docs

Однако, имеются встроенные средства получения справочной информации:

Справка из командной строки Linux:

::

	psql --help | less
	
::

	man psql
	
Из сеанса psql:

- **\\?** список команд psql
- **\\? variables** переменные psql
- **\\h[elp]** список команд SQL
- **\\h  команда** синтаксис команды SQL
- **\\q** выход







